# ComfyUI Image Directory Tools

一个功能强大的ComfyUI自定义节点集合，提供高级图像目录加载、批量保存和预览功能，支持复杂的文件管理和工作流自动化。
![剪贴板图片 (1)](https://github.com/user-attachments/assets/8dc19371-74cd-42ae-9140-3a51f138ccc5)



## 功能特点

- **多节点协同工作流**：三个专用节点无缝配合，实现从加载到保存的完整工作流
- **智能目录加载**：支持递归搜索、多条件过滤和多种排序方式（名称/数字/修改时间）
- **高级批量处理**：单张顺序加载模式配合队列运行数量，实现灵活的批量控制
- **断点续传**：内置记忆功能，自动记录最后加载位置，支持任务中断后继续处理
- **智能队列管理**：自动计算剩余图片数量并提供队列运行建议
- **灵活的保存选项**：支持多种格式（原格式/JPG/PNG/WEBP）和压缩质量控制
- **路径保持**：保存时自动维持原始目录结构，便于组织和回溯
- **错误处理**：加载失败自动跳过，确保工作流稳定运行
- **透明通道支持**：可选择将图像转换为RGBA格式保存

## 节点介绍

### 1. 图像目录加载器 (zyf_ImageDirectoryLoader)
从指定目录加载图像，支持多种高级选项：
- 递归搜索子目录
- 自定义文件扩展名过滤
- 起始索引设置
- 单张顺序加载/批量加载模式切换
- 记忆功能（断点续传）
- 任务批次编号管理
- 智能队列建议
- 转换为RGBA格式选项

### 2. 图像目录保存器 (zyf_ImageDirectorySaver)
批量保存图像并保持原始目录结构：
- 支持多种保存格式
- JPG/WEBP压缩质量控制
- 覆盖策略选择
- 自动创建输出目录结构

### 3. 图像保存与预览器 (zyf_ImageSaveWithPreview)
单张图像保存与预览工具：
- 灵活的路径配置
- 自动生成唯一文件名
- 支持从加载节点传递文件名
- 预览输出功能
- 多种保存格式支持

## 安装方法

1. 确保已安装ComfyUI,无需安装额外依赖
2. 克隆本仓库到ComfyUI的`custom_nodes`目录：
```bash
git clone https://github.com/xiaobai9009/comfyui-zyf_image_directory_nodes.git
```
3. 重启ComfyUI
4. 在节点面板的"目录加载与保存"分类下找到新节点

## 使用示例

### 基本工作流
1. 添加"图像目录加载器"节点，设置目标目录和加载选项
2. 连接到图像处理节点（如调整大小、滤镜等）
3. 添加"图像目录保存器"节点，设置输出目录和保存选项
4. 启用队列运行，设置建议的队列次数

### 单张顺序处理
1. 在加载器中启用"单张顺序加载"和"启用记忆功能"
2. 配置处理节点
3. 添加"图像保存与预览器"节点
4. 在队列设置中输入"剩余未处理"数量作为队列次数

## 更新日志

### v1.0.0
- 初始版本发布
- 包含三个核心节点：加载器、保存器和预览器
- 移除"最大加载数量"参数，采用更灵活的队列控制方式
- 新增"剩余未处理"输出参数
- 添加智能队列建议功能
- 优化记忆功能，支持跨会话持久化

## 许可证

本项目采用MIT许可证 - 详情参见LICENSE文件

## 贡献

欢迎提交issues和pull requests，帮助改进这个工具集。

## 联系方式

如有问题或建议，请联系 [your.email@example.com]
